
<head>
  <title>Simplest upload form</title>
</head>

<body>
  <h1>Simplest upload form!</h1>
  <p>See <a href="https://github.com/VeliovGroup/Meteor-Files">ostrio:files</a></p>

  {{> uploadForm}}

  {{> uploadedFiles}}

  <hr>
  {{> quickForm id="uploadAuto" collection="Posts" type="insert"}}
  <hr>
  {{> file}}
</body>

<template name="uploadForm">
  {{#with currentUpload}}
    Uploading <b>{{file.name}}</b>:
    <span id="progress">{{progress.get}}%</span>
  {{else}}
    <input id="fileInput" type="file" />
    <p><small>Upload file in <code>jpeg</code> or <code>png</code> format, with size less or equal to 10MB</small></p>
  {{/with}}
</template>

<template name="uploadedFiles">
  {{#if uploadedFiles.count}}
    <ul>
      {{#each file in uploadedFiles.each}}
        <li>
          <a href="{{file.link}}?download=true" download="{{file.name}}">{{file.name}}</a>
        </li>
      {{/each}}
    </ul>
  {{else}}
    <div>No files uploaded, yet</div>
  {{/if}}
</template>

<template name='file'>
  {{#if imageFile.count}}
    <ul>
      {{#each file in imageFile}}
        <li>
          <a href="{{file.path}}?download=true" download="{{file.name}}">{{file.name}}</a>
        </li>
      {{/each}}
    </ul>
  {{else}}
    <div>No files uploaded, yet</div>
  {{/if}}
  <hr>
  {{#if imageFile.count}}
    {{#each file in imageFile}}
      Image:  <img src="{{file.path}}" alt="{{file.name}}" style="width:100px"/>
    {{/each}}
  {{else}}
      Loading Image...
  {{/if}}
  <hr>
  <p>image: {{imageFile.count}}</p>
</template>
